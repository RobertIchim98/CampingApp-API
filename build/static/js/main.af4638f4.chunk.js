(this["webpackJsonpionic-react"]=this["webpackJsonpionic-react"]||[]).push([[1],{117:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),c=n.n(o),l=n(6),s=n(1),i=n(5),u=(n(81),n(19)),m=n(14),p=n(32),d=n(31),E=n(8),h=n.n(E),f=n(17),y=n(41),g=n.n(y),j=function(){return function(){var e=Object(f.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return n={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,g.a.get("".concat("http://localhost:8000","/auth/users/me"),n);case 5:a=e.sent,t({type:"USER_LOADED_SUCCESS",payload:a.data}),console.log("LOGIN_SUCCESS"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:"USER_LOADED_FAIL"});case 13:e.next=16;break;case 15:t({type:"USER_LOADED_FAIL"});case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},b=Object(d.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(f.a)(h.a.mark((function n(a){var r,o,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},o=JSON.stringify({email:e,password:t}),console.log("This is user:"+o),n.prev=3,n.next=6,g.a.post("".concat("http://localhost:8000","/auth/jwt/create/"),o,r);case 6:c=n.sent,a({type:"LOGIN_SUCCESS",payload:c.data}),a(j()),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(3),a({type:"LOGIN_FAIL"}),console.log("LOGIN_FAIL");case 15:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuthenticated,o=Object(a.useState)({email:"",password:""}),c=Object(p.a)(o,2),d=c[0],E=c[1],h=d.email,f=d.password,y=function(e){return E(Object(m.a)(Object(m.a)({},d),{},Object(u.a)({},e.target.name,e.target.value)))};return n?(console.log("You are authenticated"),r.a.createElement(l.a,{to:"/mapview"})):(console.log("Not authenticated"),r.a.createElement(s.h,null,r.a.createElement(s.c,null,r.a.createElement("h1",{className:"ion-padding"},"Login"),r.a.createElement(s.b,{color:"secondary",fill:"outline",shape:"round",href:"/register"},r.a.createElement(s.d,{slot:"start",icon:i.c}),"Register"),r.a.createElement("form",{className:"ion-padding",onSubmit:function(e){return function(e){e.preventDefault(),console.log(e),t(h,f)}(e)}},r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.d,{icon:i.p})),r.a.createElement(s.e,{type:"email",placeholder:"Email",name:"email",onIonChange:function(e){return y(e)},required:!0})),r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.d,{icon:i.j})),r.a.createElement(s.e,{type:"password",placeholder:"Password",name:"password",onIonChange:function(e){return y(e)},required:!0})),r.a.createElement(s.b,{type:"submit",expand:"block",color:"success",size:"large",shape:"round"},r.a.createElement(s.d,{slot:"start",icon:i.k}),"Login")),r.a.createElement(s.f,{class:"ion-text-center",lines:"none"},r.a.createElement(s.g,null,"Don't have an account?"),r.a.createElement(s.b,{color:"secondary",fill:"outline",shape:"round",href:"/register"},r.a.createElement(s.d,{slot:"start",icon:i.c}),"Join the Community!")))))}));function v(){return(v=Object(f.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=document.createElement("ion-toast")).message=t,a.duration=2e3,a.color=n,a.position="bottom",document.body.appendChild(a),e.abrupt("return",a.present());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){var e=Object(a.useState)({username:"",email:"",firstName:"",lastName:"",password:"",re_password:""}),t=Object(p.a)(e,2),n=t[0],o=t[1],c=(n.username,n.email,n.firstName,n.lastName,n.password,n.re_password,function(e){o(Object(m.a)(Object(m.a)({},n),{},Object(u.a)({},e.target.name,e.target.value)))}),l=function(e){e.preventDefault(),console.log(e),console.log(n),n.password==n.re_password?console.log("Passwords okay!"):(console.log("passdontmatch"),function(e,t){v.apply(this,arguments)}("Passwords don't match!","danger"))};return r.a.createElement(s.h,null,r.a.createElement(s.c,null,r.a.createElement("h2",{className:"ion-padding"},"Register"),r.a.createElement("p",{className:"ion-padding"},"Welcome Adventurer! ",r.a.createElement("br",null),"Create you account and start your Journey:"),r.a.createElement("form",{className:"ion-padding",onSubmit:function(e){return l(e)}},r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.d,{icon:i.b})),r.a.createElement(s.e,{placeholder:"Email",type:"email",name:"email",onIonChange:function(e){return c(e)},required:!0})),r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.d,{icon:i.p})),r.a.createElement(s.e,{placeholder:"Username",name:"username",type:"text",onIonChange:function(e){return c(e)},required:!0})),r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.d,{icon:i.p})),r.a.createElement(s.e,{placeholder:"First Name",type:"text",name:"firstName",onIonChange:function(e){return c(e)},required:!0})),r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.d,{icon:i.p})),r.a.createElement(s.e,{placeholder:"Last Name",type:"text",name:"lastName",onIonChange:function(e){return c(e)},required:!0})),r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.d,{icon:i.j})),r.a.createElement(s.e,{placeholder:"Password",type:"password",name:"password",onIonChange:function(e){return c(e)},required:!0})),r.a.createElement(s.f,null,r.a.createElement(s.g,null,r.a.createElement(s.d,{icon:i.j})),r.a.createElement(s.e,{placeholder:"Re-type Password",type:"password",name:"re_password",onIonChange:function(e){return c(e)},required:!0})),r.a.createElement(s.b,{expand:"block",color:"secondary",size:"large",shape:"round",type:"submit"},r.a.createElement(s.d,{slot:"start",icon:i.c}),"Join the Community!"),r.a.createElement(s.f,{class:"ion-text-center",lines:"none"},r.a.createElement(s.g,null,"Already have an account?"),r.a.createElement(s.b,{color:"success",fill:"outline",shape:"round",href:"/login",routerDirection:"forward"},r.a.createElement(s.d,{slot:"start",icon:i.k}),"Login")))))},O=n(38),w=function(){return r.a.createElement(O.a,null,r.a.createElement(s.o,{class:"ion-text-center"},r.a.createElement(s.n,null,"Adventurer's Atlas")),r.a.createElement(s.c,{class:"vertical-center"},r.a.createElement(s.f,{class:"ion-text-center"},r.a.createElement(s.g,null,r.a.createElement(s.b,{expand:"block",color:"success",size:"large",shape:"round",href:"/login",routerDirection:"forward"},r.a.createElement(s.d,{slot:"start",icon:i.k}),"Login"))),r.a.createElement(s.f,{class:"ion-text-center",lines:"none"},r.a.createElement(s.g,null,r.a.createElement("h3",null,"Dont have an account?"),r.a.createElement(s.b,{expand:"block",color:"secondary",size:"large",shape:"round",href:"/register"},r.a.createElement(s.d,{slot:"start",icon:i.c}),"Join the community")))))},S=Object(d.b)(null,{checkAuthenticated:function(){return function(){var e=Object(f.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return n={headers:{"Content-Type":"application/json",Accept:"application/json"}},a=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,g.a.post("".concat("http://localhost:8000","/auth/jwt/verify/"),a,n);case 6:"token_not_valid"!==e.sent.data.code&&t({type:"AUTHENTICATED_SUCCESS"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:"AUTHENTICATED_FAIL"},console.log("token_not_valid"));case 13:e.next=16;break;case 15:t({type:"AUTHENTICATED_FAIL"});case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},load_user:j})((function(e){return Object(a.useEffect)((function(){e.checkAuthenticated(),e.load_user()}),[]),r.a.createElement(s.h,null,r.a.createElement(s.c,null,r.a.createElement("div",null," Hello User!")))})),A=(n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115),n(116),n(117),n(27)),I=n(66),C=n(67),k={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:null,user:null},x=Object(A.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"AUTHENTICATED_SUCCESS":return Object(m.a)(Object(m.a)({},e),{},{isAuthenticated:!0});case"LOGIN_SUCCESS":return localStorage.setItem("access",a.access),Object(m.a)(Object(m.a)({},e),{},{isAuthenticated:!0,access:a.access,refresh:a.refresh});case"USER_LOADED_SUCCESS":return Object(m.a)(Object(m.a)({},e),{},{user:a});case"AUTHENTICATED_FAIL":return Object(m.a)(Object(m.a)({},e),{},{isAuthenticated:!1});case"USER_LOADED_FAIL":return Object(m.a)(Object(m.a)({},e),{},{user:null});case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(m.a)(Object(m.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null});default:return e}}}),N=[C.a],L=Object(A.createStore)(x,{},Object(I.composeWithDevTools)(A.applyMiddleware.apply(void 0,N))),D=n(68),T=function(){return r.a.createElement(d.a,{store:L},r.a.createElement(s.a,null,r.a.createElement(D.a,null,r.a.createElement(s.m,null,r.a.createElement(s.j,null,r.a.createElement(l.b,{path:"/greet",exact:!0,component:w}),r.a.createElement(l.b,{path:"/login",component:b}),r.a.createElement(l.b,{path:"/register",component:_}),r.a.createElement(l.b,{path:"/mapview",component:S})),r.a.createElement(s.k,{slot:"bottom"},r.a.createElement(s.l,{href:"/mapview",tab:"mapview"},r.a.createElement(s.d,{icon:i.l}),r.a.createElement(s.g,null,"Discover")),r.a.createElement(s.l,{href:"/spots",tab:"spots"},r.a.createElement(s.d,{icon:i.o}),r.a.createElement(s.g,null,"My Spots")),r.a.createElement(s.l,{href:"/settings",tab:"settings"},r.a.createElement(s.d,{icon:i.u}),r.a.createElement(s.g,null,"Settings")))))))};c.a.render(r.a.createElement(T,null),document.getElementById("root"))},72:function(e,t,n){e.exports=n(118)},78:function(e,t,n){var a={"./ion-action-sheet.entry.js":[120,5],"./ion-alert.entry.js":[121,6],"./ion-app_8.entry.js":[122,7],"./ion-avatar_3.entry.js":[123,17],"./ion-back-button.entry.js":[124,18],"./ion-backdrop.entry.js":[125,43],"./ion-button_2.entry.js":[126,19],"./ion-card_5.entry.js":[127,20],"./ion-checkbox.entry.js":[128,21],"./ion-chip.entry.js":[129,22],"./ion-col_3.entry.js":[130,44],"./ion-datetime_3.entry.js":[131,10],"./ion-fab_3.entry.js":[132,23],"./ion-img.entry.js":[133,45],"./ion-infinite-scroll_2.entry.js":[134,46],"./ion-input.entry.js":[135,24],"./ion-item-option_3.entry.js":[136,25],"./ion-item_8.entry.js":[137,26],"./ion-loading.entry.js":[138,27],"./ion-menu_3.entry.js":[139,28],"./ion-modal.entry.js":[140,8],"./ion-nav_2.entry.js":[141,14],"./ion-popover.entry.js":[142,9],"./ion-progress-bar.entry.js":[143,29],"./ion-radio_2.entry.js":[144,30],"./ion-range.entry.js":[145,31],"./ion-refresher_2.entry.js":[146,11],"./ion-reorder_2.entry.js":[147,16],"./ion-ripple-effect.entry.js":[148,47],"./ion-route_4.entry.js":[149,32],"./ion-searchbar.entry.js":[150,33],"./ion-segment_2.entry.js":[151,34],"./ion-select_3.entry.js":[152,35],"./ion-slide_2.entry.js":[153,48],"./ion-spinner.entry.js":[154,13],"./ion-split-pane.entry.js":[155,49],"./ion-tab-bar_2.entry.js":[156,36],"./ion-tab_2.entry.js":[157,15],"./ion-text.entry.js":[158,37],"./ion-textarea.entry.js":[159,38],"./ion-toast.entry.js":[160,39],"./ion-toggle.entry.js":[161,12],"./ion-virtual-scroll.entry.js":[162,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=78,e.exports=r},80:function(e,t,n){var a={"./ion-icon.entry.js":[164,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=80,e.exports=r}},[[72,3,4]]]);
//# sourceMappingURL=main.af4638f4.chunk.js.map